<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ANIMAL ‚Äî Meme on TON</title>
<meta name="description" content="ANIMAL ‚Äî a fun, TON-native meme token celebrating the sticker culture that changed Telegram forever." />
<meta name="theme-color" content="#14a8ff" />
<style>
  :root{
    --bg:#03050a;--card:rgba(15,25,40,.6);--line:rgba(255,255,255,.08);
    --text:#d7e9ff;--muted:#9bc5ff;--accent:#14a8ff;--glow:0 8px 40px rgba(20,168,255,.35);
  }
  *{box-sizing:border-box}
  html,body{margin:0;height:100%;background:
    radial-gradient(1200px 800px at 20% -10%, rgba(0,122,255,.25), transparent 60%),
    radial-gradient(1000px 700px at 110% 10%, rgba(20,168,255,.18), transparent 65%),var(--bg);
    color:var(--text);font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
  a{color:var(--text);text-decoration:none}
  .wrap{max-width:1100px;margin:0 auto;padding:0 18px}

  header,main,footer{position:relative;z-index:1}
  header{position:sticky;top:0;backdrop-filter:blur(10px);
    background:linear-gradient(180deg,rgba(3,5,10,.8),rgba(3,5,10,.35));border-bottom:1px solid var(--line)}
  .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
  .brand{display:flex;align-items:center;gap:10px;font-weight:800}
  .brand img{width:34px;height:34px;border-radius:50%;box-shadow:var(--glow)}
  .btn{padding:10px 14px;border:1px solid var(--line);border-radius:12px;background:rgba(255,255,255,.06);transition:.2s}
  .btn:hover{transform:translateY(-1px)}
  .cta-group{display:flex;gap:10px;align-items:center}

  .hero{padding:70px 0 30px}
  .h1{font-size:clamp(34px,5vw,54px);line-height:1.05;font-weight:900}
  .tag{display:inline-block;font-size:14px;padding:6px 10px;border-radius:100px;background:rgba(20,168,255,.12);border:1px solid rgba(20,168,255,.35);color:#bfe3ff}
  .sub{font-size:18px;color:var(--muted);max-width:720px}
  .hero-cta{display:flex;gap:12px;flex-wrap:wrap;margin-top:18px}
  .primary{background:linear-gradient(180deg,rgba(20,168,255,.9),rgba(0,122,255,.9));border:none;color:#fff;font-weight:700}
  .secondary{border:1px solid var(--line);background:rgba(255,255,255,.04)}
  .pill{display:inline-flex;align-items:center;gap:8px;padding:12px 16px;border-radius:14px;box-shadow:var(--glow)}

  .grid{display:grid;gap:16px;grid-template-columns:repeat(12,1fr)}
  .card{grid-column:span 4;background:var(--card);border:1px solid var(--line);border-radius:18px;padding:16px}
  @media (max-width:900px){.card{grid-column:span 6}} @media (max-width:640px){.card{grid-column:span 12}}
  .muted{color:var(--muted)}

  .wall{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:12px}
  .wall figure{margin:0;padding:10px;background:rgba(255,255,255,.03);border:1px solid var(--line);border-radius:14px}
  .wall a{display:block}
  .wall img{width:100%;height:120px;object-fit:contain;display:block}

  footer{margin:50px 0 80px;opacity:.9}
  #rain{position:fixed;inset:0;pointer-events:none;z-index:0}

  /* Price card under hero */
  .price-card{margin-top:14px;display:flex;flex-direction:column;gap:6px;width:100%;max-width:480px;
    border:1px solid var(--line);background:rgba(255,255,255,.04);border-radius:14px;padding:12px 14px;box-shadow:var(--glow)}
  .price-row{display:flex;align-items:baseline;gap:10px;flex-wrap:wrap}
  .price-value{font-size:clamp(20px,3.5vw,28px);font-weight:800}
  .price-chg{font-weight:700;padding:2px 8px;border-radius:999px;font-size:14px;border:1px solid var(--line);background:rgba(255,255,255,.05)}
  .price-chg.up{color:#4ade80;border-color:rgba(74,222,128,.35);background:rgba(74,222,128,.10)}
  .price-chg.down{color:#f87171;border-color:rgba(248,113,113,.35);background:rgba(248,113,113,.10)}
  .price-sub{color:var(--muted);font-size:14px;display:flex;gap:10px;flex-wrap:wrap}

  /* Mini price pill in header */
  .price-pill{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;
    border:1px solid var(--line);background:rgba(255,255,255,.06);font-weight:700;font-size:14px;box-shadow:var(--glow)}
  .price-pill.up{color:#4ade80;border-color:rgba(74,222,128,.35);background:rgba(74,222,128,.10)}
  .price-pill.down{color:#f87171;border-color:rgba(248,113,113,.35);background:rgba(248,113,113,.10)}
  .pill-dot{width:8px;height:8px;border-radius:50%;background:currentColor;opacity:.8}

  /* Proof slideshow (full image, no crop) */
  .proofs{margin:26px 0 10px}
  .proofs h2{margin:0 0 10px}
  .proof-hero{position:relative;width:100%;border:1px solid var(--line);border-radius:18px;overflow:hidden;
    background:rgba(255,255,255,.03);box-shadow:var(--glow);display:flex;justify-content:center;align-items:center}
  .proof-hero img{max-width:100%;max-height:clamp(220px,70vh,600px);object-fit:contain;display:block;opacity:0;transition:opacity .6s ease}
  .proof-hero img.show{opacity:1}
  .dots{position:absolute;left:0;right:0;bottom:10px;display:flex;gap:8px;justify-content:center;align-items:center}
  .dot{width:10px;height:10px;border-radius:50%;background:rgba(255,255,255,.35);border:1px solid rgba(255,255,255,.5);cursor:pointer;transition:transform .2s,background .2s}
  .dot.active{background:#fff;transform:scale(1.1)}
  .proof-hero a.full{position:absolute;inset:0;z-index:2}
</style>
</head>
<body>
<canvas id="rain"></canvas>

<header>
  <div class="wrap nav">
    <div class="brand">
      <img alt="ANIMAL logo" src="animal-logo.png" />
      <span>ANIMAL</span>
    </div>
    <div class="cta-group">
      <a class="btn" id="buyBtn" href="#">Buy on DEX</a>
      <a class="btn" id="chartBtn" href="#">Chart</a>
      <a class="btn" id="tgBtn" href="#">Telegram</a>
      <span id="pricePill" class="price-pill" aria-live="polite" title="Live price (USD)">
        <span class="pill-dot"></span><span id="pillPrice">‚Äî</span>
      </span>
    </div>
  </div>
</header>

<main class="wrap">
  <section class="hero">
    <span class="tag">TON-native ¬∑ Meme culture</span>
    <h1 class="h1">Sticker Energy ‚Äî <span style="color:var(--accent)">on TON</span></h1>
    <p class="sub">
      <strong>ANIMALS üêæ</strong> is the first custom sticker ever. It's the OG sticker pack that started the stickers revolution on Telegram.<br/>
      Send it. Share it. Own it. <a href="https://telegram.org/blog/stickers-revolution?setln=en" target="_blank" rel="noopener">Read the origin story ‚Üó</a>
    </p>
    <div class="hero-cta">
      <a class="pill primary" id="buyPrimary" href="#">üõí Buy ANIMAL</a>
      <a class="pill secondary" id="chartPrimary" href="#">üìà View Chart</a>
      <a class="pill secondary" href="https://telegram.org/blog/stickers-revolution?setln=en" target="_blank" rel="noopener">üß© Sticker Origin</a>
    </div>

    <!-- Live Price Card -->
    <div id="priceCard" class="price-card" aria-live="polite">
      <div class="price-row">
        <div class="price-value" id="priceUsd">‚Äî</div>
        <div class="price-chg" id="priceChg">‚Äî</div>
      </div>
      <div class="price-sub">
        <span>24h Vol: <strong id="vol24">‚Äî</strong></span>
        <span>FDV: <strong id="fdv">‚Äî</strong></span>
        <a id="chartLink" href="https://www.geckoterminal.com/ton/pools/EQBpfJcKGLeI_Hjndfc1HiDD2OFC98S0O9rdaZhmwtlJFGtQ" target="_blank" rel="noopener">Chart ‚Üó</a>
      </div>
    </div>
  </section>

  <!-- Sticker Proofs Slideshow -->
  <section class="proofs">
    <h2>Sticker Proofs</h2>
    <div class="proof-hero" id="proofHero">
      <img id="proofImg" src="" alt="Sticker Proof" />
      <a id="proofLink" class="full" href="#" target="_blank" rel="noopener"></a>
      <div class="dots" id="proofDots"></div>
    </div>
  </section>

  <section style="margin:34px 0">
    <div class="grid">
      <article class="card"><h3>What is ANIMAL?</h3><p class="muted">A fun TON-native meme token that pays homage to Telegram‚Äôs first custom sticker and the culture it unlocked.</p></article>
      <article class="card"><h3>Why stickers?</h3><p class="muted">Stickers turned chats into playgrounds. ANIMAL captures that energy ‚Äî fast, visual, shareable ‚Äî then pairs it with on-chain fun.</p></article>
      <article class="card"><h3>How to join</h3><p class="muted">Grab some ANIMAL on DEX, join the Telegram, and drop your best sticker-powered memes. Simple.</p></article>
    </div>
  </section>

  <section>
    <h2>Sticker Wall</h2>
    <div class="wall" id="stickerWall"></div>
  </section>

  <footer>
    <hr style="border:0;border-top:1px solid var(--line);margin-bottom:12px">
    <div style="display:flex;gap:14px;flex-wrap:wrap;align-items:center;justify-content:space-between">
      <small class="muted">¬© <span id="year"></span> ANIMAL ¬∑ Built with sticker energy ¬∑ Not financial advice.</small>
      <div style="display:flex;gap:10px">
        <a class="btn" href="https://dexscreener.com/" target="_blank" rel="noopener">Dexscreener</a>
        <a class="btn" href="https://ston.fi/" target="_blank" rel="noopener">Ston.fi</a>
        <a class="btn" href="https://dedust.io/" target="_blank" rel="noopener">DeDust</a>
        <a class="btn" href="https://x.com/animalstoncoin" target="_blank" rel="noopener">Twitter</a>
      </div>
    </div>
  </footer>
</main>

<script>
/* ===== Config links ===== */
const CONTRACT_ADDRESS="PASTE_YOUR_JETTON_ADDRESS";
const STONFI_LINK="https://dedust.io/swap/TON/EQBDc5nGD52r2GMIBo4tXaf4qdhUdgod9OxHhRcuRKjBryeJ";
const DEXSCREENER_LINK="https://www.geckoterminal.com/ton/pools/EQBpfJcKGLeI_Hjndfc1HiDD2OFC98S0O9rdaZhmwtlJFGtQ";
const TELEGRAM_LINK="https://t.me/animalstoncoin";
const TWITTER_LINK="https://x.com/animalstoncoin";

/* ===== GeckoTerminal API (defensive) ===== */
const GT_NETWORK="ton";
const GT_POOL_ID="EQBpfJcKGLeI_Hjndfc1HiDD2OFC98S0O9rdaZhmwtlJFGtQ";
const GT_API_URL=`https://api.geckoterminal.com/api/v2/networks/${GT_NETWORK}/pools/${GT_POOL_ID}`;

const toNum=(v)=>v==null?null:(typeof v==="number"?v:Number(v));
const fmtUSD=(n)=>{if(n==null||isNaN(n))return"‚Äî";const v=Number(n);
  if(v>=1)return"$"+v.toLocaleString(undefined,{maximumFractionDigits:4});
  if(v>=0.01)return"$"+v.toLocaleString(undefined,{maximumFractionDigits:6});
  return"$"+v.toLocaleString(undefined,{maximumFractionDigits:10});};
const fmtNum=(n)=>{if(n==null||isNaN(n))return"‚Äî";const v=Number(n);
  if(v>=1e9)return(v/1e9).toFixed(2)+"B"; if(v>=1e6)return(v/1e6).toFixed(2)+"M";
  if(v>=1e3)return(v/1e3).toFixed(2)+"k"; return v.toLocaleString();};
const fmtPct=(n)=>{if(n==null||isNaN(n))return"‚Äî";const v=Number(n);const s=v>0?"+":"";return s+v.toFixed(2)+"%";};

function setStatus(msg){
  let el=document.getElementById("priceStatus");
  if(!el){const card=document.getElementById("priceCard"); if(!card) return;
    el=document.createElement("small"); el.id="priceStatus"; el.style.color="var(--muted)"; el.style.opacity=".8"; card.appendChild(el);}
  el.textContent=msg||"";
}

async function fetchGeckoTerminal(){
  try{
    setStatus("Updating‚Ä¶");
    const res=await fetch(GT_API_URL,{headers:{"accept":"application/json"},mode:"cors",cache:"no-store",referrerPolicy:"no-referrer"});
    if(!res.ok) throw new Error("HTTP "+res.status);
    const json=await res.json(); const attr=json?.data?.attributes||{};
    const priceUsd=toNum(attr.price_in_usd ?? attr.base_token_price_usd ?? attr.quote_token_price_usd);
    const change24=toNum(attr?.price_change_percentage?.h24);
    const vol24=toNum(attr?.volume_usd?.h24);
    const fdvUsd=toNum(attr?.fdv_usd);

    document.getElementById("priceUsd").textContent=fmtUSD(priceUsd);
    const elCh=document.getElementById("priceChg");
    elCh.textContent=fmtPct(change24); elCh.classList.remove("up","down"); if(typeof change24==="number") elCh.classList.add(change24>=0?"up":"down");
    document.getElementById("vol24").textContent="$"+fmtNum(vol24);
    document.getElementById("fdv").textContent="$"+fmtNum(fdvUsd);

    document.getElementById("pillPrice").textContent=fmtUSD(priceUsd);
    const pill=document.getElementById("pricePill"); pill.classList.remove("up","down"); if(typeof change24==="number") pill.classList.add(change24>=0?"up":"down");

    setStatus("");
  }catch(err){
    console.warn("GeckoTerminal fetch failed:", err);
    setStatus("Price unavailable");
    const p=document.getElementById("priceUsd"); if(p && (p.textContent==="‚Äî"||p.textContent==="")) p.textContent="N/A";
    const pp=document.getElementById("pillPrice"); if(pp && (pp.textContent==="‚Äî"||pp.textContent==="")) pp.textContent="N/A";
  }
}
function startPricePolling(){ fetchGeckoTerminal(); setInterval(fetchGeckoTerminal,30000); }

/* ===== Proofs slideshow ===== */
const PROOFS=[
  "https://i.ibb.co/67P7LB1F/image.jpg",
  "https://i.ibb.co/fd9HqwvW/image.jpg",
  "https://i.ibb.co/d0Sg6rMp/image.jpg"
];
const SLIDE_MS=3500; let proofIdx=0, proofTimer=null;
function preload(urls){urls.forEach(u=>{const i=new Image();i.src=u;});}
function setProof(idx){
  proofIdx=(idx+PROOFS.length)%PROOFS.length;
  const img=document.getElementById('proofImg'); const link=document.getElementById('proofLink');
  img.classList.remove('show'); const nextUrl=PROOFS[proofIdx]; const tmp=new Image();
  tmp.onload=()=>{img.src=nextUrl; img.classList.add('show');}; tmp.src=nextUrl+"?v="+Date.now(); link.href=nextUrl;
  document.querySelectorAll('.dot').forEach((d,i)=>d.classList.toggle('active',i===proofIdx));
}
function startProofs(){ if(proofTimer)clearInterval(proofTimer); setProof(0); proofTimer=setInterval(()=>setProof(proofIdx+1),SLIDE_MS); }
function buildDots(){const holder=document.getElementById('proofDots'); holder.innerHTML="";
  PROOFS.forEach((_,i)=>{const d=document.createElement('div'); d.className='dot'+(i===0?' active':'');
    d.addEventListener('click',()=>{setProof(i); if(proofTimer){clearInterval(proofTimer);} proofTimer=setInterval(()=>setProof(proofIdx+1),SLIDE_MS);});
    holder.appendChild(d);});
}
function wireHoverPause(){const hero=document.getElementById('proofHero');
  hero.addEventListener('mouseenter',()=>{if(proofTimer){clearInterval(proofTimer); proofTimer=null;}});
  hero.addEventListener('mouseleave',()=>{if(!proofTimer){proofTimer=setInterval(()=>setProof(proofIdx+1),SLIDE_MS);}});}

/* ===== Sticker Wall & Rain (robust) ===== */
const MAX_STICKERS=60;
const EXTENSIONS=[".png",".jpg",".jpeg",".webp"];
const BASES=["./stickers/"]; // RELATIVE only (works on GitHub Pages repo path)

function checkImage(url){return new Promise(res=>{const i=new Image();i.onload=()=>res(true);i.onerror=()=>res(false);i.src=url+"?v="+Date.now();});}
async function resolveStickerUrl(fileBase){
  for(const base of BASES){
    for(const ext of EXTENSIONS){
      const url=base+fileBase+ext;
      if(await checkImage(url)) return url;
    }
  }
  return null;
}
async function discoverStickers(){
  const found=[]; let miss=0;
  for(let i=1;i<=MAX_STICKERS;i++){
    const name=`animal${i}`;
    const url=await resolveStickerUrl(name);
    if(url){found.push({url}); miss=0;}
    else {miss++; if(miss>=5 && found.length) break;}
  }
  return found;
}
function buildWall(list){
  const wall=document.getElementById('stickerWall'); wall.innerHTML="";
  if(!list.length){
    wall.innerHTML = `
      <div class="card" style="grid-column:span 12">
        <p class="muted">No stickers found yet. Upload files like
        <code>animal1.png</code>, <code>animal2.jpg</code> ‚Ä¶ into <code>/stickers/</code> in your repo.</p>
      </div>`;
    return;
  }
  list.forEach(it=>{
    const fig=document.createElement('figure');
    const a=document.createElement('a'); a.href=it.url; a.target="_blank"; a.rel="noopener";
    const img=document.createElement('img'); img.src=it.url; img.alt="Sticker";
    a.appendChild(img); fig.appendChild(a); wall.appendChild(fig);
  });
}

/* ===== Rain background with fallback to emojis ===== */
const MOBILE_BREAKPOINT=780;
const DESKTOP={DENSITY_BASE:26000,SIZE_MIN:28,SIZE_MAX:80,SPEED_MIN:.8,SPEED_MAX:2.2,OPACITY:.95};
const CONFETTI={DENSITY_BASE:42000,SIZE_MIN:18,SIZE_MAX:46,SPEED_MIN:.6,SPEED_MAX:1.6,OPACITY:.9};
const cvs=document.getElementById('rain'), ctx=cvs.getContext('2d',{alpha:true});
function isMobile(){return Math.max(innerWidth,innerHeight)<MOBILE_BREAKPOINT;}
let S=DESKTOP;
function fit(){
  const dpr=Math.max(1,Math.min(2,devicePixelRatio||1));
  cvs.width=Math.floor(innerWidth*dpr); cvs.height=Math.floor(innerHeight*dpr);
  cvs.style.width=innerWidth+'px'; cvs.style.height=innerHeight+'px';
  ctx.setTransform(dpr,0,0,dpr,0,0); S=isMobile()?CONFETTI:DESKTOP;
}
addEventListener('resize',fit,{passive:true}); fit();

let icons=[], drops=[], rafId=0, useEmoji=false;
function targetCount(){return Math.max(16,Math.min(120,Math.floor((innerWidth*innerHeight)/S.DENSITY_BASE)));}

function spawn(){
  const icon = icons.length ? icons[(Math.random()*icons.length)|0] : null;
  const size=S.SIZE_MIN+Math.random()*(S.SIZE_MAX-S.SIZE_MIN);
  return{
    x:Math.random()*innerWidth, y:-80,
    vy:S.SPEED_MIN+Math.random()*(S.SPEED_MAX-S.SPEED_MIN),
    size, rot:Math.random()*Math.PI*2, vr:(Math.random()-.5)*0.02, sway:(Math.random()-.5)*.7,
    icon
  };
}

function drawDrop(d){
  ctx.save();
  ctx.translate(d.x,d.y);
  ctx.rotate(d.rot);
  ctx.globalAlpha=S.OPACITY;
  if(!useEmoji && d.icon){ // image
    ctx.drawImage(d.icon,-d.size/2,-d.size/2,d.size,d.size);
  }else{ // emoji fallback
    ctx.font = `${Math.floor(d.size)}px serif`;
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    ctx.fillText(["üêæ","üê∂","üê±","ü¶ä","üêª"][Math.floor(Math.random()*5)], 0, 0);
  }
  ctx.restore();
}

function step(){
  ctx.clearRect(0,0,innerWidth,innerHeight);
  for(const d of drops){
    d.y+=d.vy; d.x+=Math.sin(d.y*.02)*d.sway; d.rot+=d.vr;
    drawDrop(d);
  }
  for(let i=drops.length-1;i>=0;i--) if(drops[i].y>innerHeight+100) drops.splice(i,1);
  while(drops.length<targetCount()) drops.push(spawn());
  rafId=requestAnimationFrame(step);
}
if(!rafId) rafId=requestAnimationFrame(step);

function loadIcons(list){
  return Promise.all(list.map(it=>new Promise(r=>{
    const im=new Image(); im.onload=()=>r(im); im.onerror=()=>r(null); im.src=it.url;
  }))).then(arr=>arr.filter(Boolean));
}

/* ===== Boot ===== */
document.addEventListener("DOMContentLoaded", async ()=>{
  document.getElementById("year").textContent=new Date().getFullYear();
  document.getElementById("contractAddr").textContent=CONTRACT_ADDRESS||"(add your jetton address)";
  const setHref=(el,url)=>{if(el&&url){el.href=url;el.target="_blank";el.rel="noopener"}};
  setHref(document.getElementById("buyBtn"),STONFI_LINK);
  setHref(document.getElementById("chartBtn"),DEXSCREENER_LINK);
  setHref(document.getElementById("tgBtn"),TELEGRAM_LINK);
  setHref(document.getElementById("buyPrimary"),STONFI_LINK);
  setHref(document.getElementById("chartPrimary"),DEXSCREENER_LINK);

  // Start price (won‚Äôt block other features if it fails)
  startPricePolling();

  // Proofs slideshow
  preload(PROOFS); buildDots(); startProofs(); wireHoverPause();

  // Sticker wall discovery
  let files=[];
  try{ files=await discoverStickers(); }catch(e){ console.warn("discoverStickers error", e); }
  buildWall(files);

  // Rain icons (fallback to emoji if none found)
  try{
    if(files.length){
      const first=await loadIcons(files.slice(0,12)); // load more upfront
      if(first.length){ icons.push(...first); useEmoji=false; }
      else { useEmoji=true; }
    }else{
      useEmoji=true;
    }
  }catch(e){ useEmoji=true; }

  // Seed a few starting drops so it‚Äôs visible immediately
  for(let i=0;i<20;i++) drops.push(spawn());

  // Tiny on-page error watcher (helps catch issues that stop JS)
  window.addEventListener('error', (e)=>{
    console.warn('Runtime error:', e.message);
  });
});
</script>
</body>
</html>
