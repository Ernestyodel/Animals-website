<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ANIMALS ‚Äî Meme on TON</title>
<meta name="description" content="ANIMALS ‚Äî a fun, TON-native meme token celebrating the sticker culture that changed Telegram forever." />
<meta name="theme-color" content="#14a8ff" />
<style>
  :root{
    --bg:#03050a;--card:rgba(15,25,40,.6);--line:rgba(255,255,255,.08);
    --text:#d7e9ff;--muted:#9bc5ff;--accent:#14a8ff;--glow:0 8px 40px rgba(20,168,255,.35);
  }
  *{box-sizing:border-box}
  html,body{
    margin:0;height:100%;
    background:
      radial-gradient(1200px 800px at 20% -10%, rgba(0,122,255,.25), transparent 60%),
      radial-gradient(1000px 700px at 110% 10%, rgba(20,168,255,.18), transparent 65%),
      var(--bg);
    color:var(--text);
    font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  }
  a{color:var(--text);text-decoration:none}
  .wrap{max-width:1100px;margin:0 auto;padding:0 18px}

  header, main, footer{position:relative; z-index:1;}
  header{
    position:sticky; top:0;
    backdrop-filter: blur(10px);
    background:linear-gradient(180deg, rgba(3,5,10,.8), rgba(3,5,10,.35));
    border-bottom:1px solid var(--line)
  }
  .nav{display:flex; align-items:center; justify-content:space-between; padding:14px 0}
  .brand{display:flex; align-items:center; gap:10px; font-weight:800;}
  .brand img{width:34px; height:34px; border-radius:50%; box-shadow:var(--glow)}
  .btn{padding:10px 14px; border:1px solid var(--line); border-radius:12px; background:rgba(255,255,255,.06); transition:.2s}
  .btn:hover{transform:translateY(-1px)}
  .cta-group{display:flex; gap:10px; align-items:center}

  .hero{padding:70px 0 30px 0}
  .h1{font-size:clamp(34px, 5vw, 54px); line-height:1.05; font-weight:900;}
  .tag{display:inline-block; font-size:14px; padding:6px 10px; border-radius:100px;
    background:rgba(20,168,255,.12); border:1px solid rgba(20,168,255,.35); color:#bfe3ff}
  .sub{font-size:18px; color:var(--muted); max-width:720px}
  .hero-cta{display:flex; gap:12px; flex-wrap:wrap; margin-top:18px}
  .primary{background:linear-gradient(180deg, rgba(20,168,255,.9), rgba(0,122,255,.9)); border:none; color:white; font-weight:700;}
  .secondary{border:1px solid var(--line); background:rgba(255,255,255,.04);}
  .pill{display:inline-flex; align-items:center; gap:8px; padding:12px 16px; border-radius:14px; box-shadow:var(--glow)}

  .grid{display:grid; gap:16px; grid-template-columns:repeat(12,1fr)}
  .card{grid-column: span 4; background:var(--card); border:1px solid var(--line); border-radius:18px; padding:16px}
  @media (max-width:900px){ .card{grid-column:span 6} }
  @media (max-width:640px){ .card{grid-column:span 12} }
  .muted{color:var(--muted)}

  .wall{display:grid; grid-template-columns:repeat(auto-fill, minmax(120px, 1fr)); gap:12px}
  .wall figure{margin:0; padding:10px; background:rgba(255,255,255,.03); border:1px solid var(--line); border-radius:14px}
  .wall a{display:block}
  .wall img{width:100%; height:120px; object-fit:contain; display:block}

  footer{margin:50px 0 80px; opacity:.9}

  /* Rain canvas behind everything */
  #rain{position:fixed; inset:0; pointer-events:none; z-index:0;}

  /* ===== Proofs Slideshow ===== */
  .proofs{margin:26px 0 10px}
  .proofs h2{margin:0 0 10px 0}
  .proof-hero{
    position:relative;
    width:100%;
    border:1px solid var(--line);
    border-radius:18px;
    overflow:hidden;
    background:rgba(255,255,255,.03);
    box-shadow: var(--glow);
    display:flex;
    justify-content:center;
    align-items:center;
  }
  .proof-hero img{
    max-width:100%;
    max-height:clamp(220px, 70vh, 600px);
    object-fit:contain;
    display:block;
    opacity:0;
    transition: opacity .6s ease;
  }
  .proof-hero img.show{ opacity:1; }
  .dots{
    position:absolute; left:0; right:0; bottom:10px;
    display:flex; gap:8px; justify-content:center; align-items:center;
  }
  .dot{
    width:10px; height:10px; border-radius:50%;
    background:rgba(255,255,255,.35); border:1px solid rgba(255,255,255,.5);
    cursor:pointer; transition:transform .2s ease, background .2s ease;
  }
  .dot.active{ background:#fff; transform:scale(1.1); }
  .proof-hero a.full{ position:absolute; inset:0; z-index:2; }

  /* Contract + metrics row */
  .contract-row{ display:flex; flex-wrap:wrap; align-items:center; gap:10px; margin-top:12px; }
  .copy-btn{
    padding:6px 10px; border:1px solid var(--line); border-radius:6px;
    background:rgba(255,255,255,.06); color:var(--text); cursor:pointer;
  }
  .metrics{ display:flex; gap:10px; margin-top:8px; flex-wrap:wrap; }
  .badge{ display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; border:1px solid var(--line); background:rgba(255,255,255,.04); }
  .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }
</style>
</head>
<body>
  <!-- Background rain -->
  <canvas id="rain"></canvas>

  <header>
    <div class="wrap nav">
      <div class="brand">
        <img alt="ANIMALS logo" src="animal-logo.png" />
        <span>ANIMALS</span>
      </div>
      <div class="cta-group">
        <a class="btn" id="buyBtn" href="#">Buy on DeDust</a>
        <a class="btn" id="chartBtn" href="#">Chart</a>
        <a class="btn" id="tgBtn" href="#">Telegram</a>
        <a class="btn" id="twBtn" href="#">Twitter</a>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <span class="tag">TON-native ¬∑ Meme culture</span>
      <h1 class="h1">Sticker Energy ‚Äî <span style="color:var(--accent)">on TON</span></h1>
      <p class="sub">
        <strong>ANIMALS üêæ</strong> is the first custom sticker ever. It's the OG sticker pack that started the stickers revolution on Telegram.<br/>
        Send it. Share it. Own it. <a href="https://telegram.org/blog/stickers-revolution?setln=en" target="_blank" rel="noopener">Read the origin story ‚Üó</a>
      </p>
      <div class="hero-cta">
        <a class="pill primary" id="buyPrimary" href="#">üõí Buy ANIMALS</a>
        <a class="pill secondary" id="chartPrimary" href="#">üìà View Chart</a>
        <a class="pill secondary" id="tgPrimary" href="#">üí¨ Telegram</a>
        <a class="pill secondary" id="twPrimary" href="#">üê¶ Twitter</a>
      </div>

      <!-- Contract + Copy -->
      <div class="contract-row">
        <span class="badge">
          Contract:
          <a id="contractLink" href="#" target="_blank" rel="noopener">
            <code id="contractAddr" class="mono"></code>
          </a>
        </span>
        <button id="copyBtn" class="copy-btn" type="button" aria-label="Copy contract address">Copy</button>
      </div>

      <!-- Live metrics -->
      <div class="metrics">
        <span class="badge" id="priceBadge">Price: <strong id="priceVal">Loading‚Ä¶</strong></span>
        <span class="badge" id="mcBadge" style="display:none;">MCap: <strong id="mcVal">Loading‚Ä¶</strong></span>
      </div>
    </section>

    <!-- Sticker Proofs Slideshow -->
    <section class="proofs">
      <h2>Sticker Proofs</h2>
      <div class="proof-hero" id="proofHero">
        <img id="proofImg" src="" alt="Sticker Proof" />
        <a id="proofLink" class="full" href="#" target="_blank" rel="noopener" aria-label="Open full image"></a>
        <div class="dots" id="proofDots"></div>
      </div>
    </section>

    <section style="margin:34px 0">
      <div class="grid">
        <article class="card"><h3>What is ANIMALS?</h3><p class="muted">A fun TON-native meme token that pays homage to Telegram‚Äôs first custom sticker and the culture it unlocked.</p></article>
        <article class="card"><h3>Why stickers?</h3><p class="muted">Stickers turned chats into playgrounds. ANIMALS captures that energy fast, visual, shareable then pairs it with on-chain fun.</p></article>
        <article class="card"><h3>How to join</h3><p class="muted">Grab some ANIMALS on DeDust, join the Telegram, and drop your best sticker-powered memes. Simple.</p></article>
      </div>
    </section>

    <section>
      <h2>Sticker Wall</h2>
      <div class="wall" id="stickerWall"></div>
    </section>

    <footer>
      <hr style="border:0; border-top:1px solid var(--line); margin-bottom:12px">
      <div style="display:flex; gap:14px; flex-wrap:wrap; align-items:center; justify-content:space-between">
        <small class="muted">¬© <span id="year"></span> ANIMALS ¬∑ Built with sticker energy ¬∑ Not financial advice.</small>
        <div style="display:flex; gap:10px">
          <a class="btn" href="https://www.geckoterminal.com/ton/pools/EQBpfJcKGLeI_Hjndfc1HiDD2OFC98S0O9rdaZhmwtlJFGtQ" target="_blank" rel="noopener">Chart</a>
          <a class="btn" href="https://dedust.io/" target="_blank" rel="noopener">DeDust</a>
          <a class="btn" href="https://x.com/animalstoncoin" target="_blank" rel="noopener">Twitter</a>
        </div>
      </div>
    </footer>
  </main>

<script>
/* ---------- Config ---------- */
const CONTRACT_ADDRESS = "EQBDc5nGD52r2GMIBo4tXaf4qdhUdgod9OxHhRcuRKjBryeJ";
const DEDUST_LINK      = "https://dedust.io/swap/TON/" + CONTRACT_ADDRESS;
const CHART_LINK       = "https://www.geckoterminal.com/ton/pools/EQBpfJcKGLeI_Hjndfc1HiDD2OFC98S0O9rdaZhmwtlJFGtQ";
const TELEGRAM_LINK    = "https://t.me/animalstoncoin";
const TWITTER_LINK     = "https://x.com/animalstoncoin";
const TONVIEWER_LINK   = "https://tonviewer.com/" + CONTRACT_ADDRESS;

/* GeckoTerminal API endpoints */
const GT_POOL_API  = "https://api.geckoterminal.com/api/v2/networks/ton/pools/EQBpfJcKGLeI_Hjndfc1HiDD2OFC98S0O9rdaZhmwtlJFGtQ";
const GT_TOKEN_API = "https://api.geckoterminal.com/api/v2/networks/ton/tokens/" + CONTRACT_ADDRESS;

/* ---------- Wire links + contract + copy ---------- */
document.addEventListener('DOMContentLoaded', ()=>{
  document.getElementById('year').textContent = new Date().getFullYear();
  document.getElementById('contractAddr').textContent = CONTRACT_ADDRESS;
  document.getElementById('contractLink').href = TONVIEWER_LINK;

  const setHref=(id,url)=>{const el=document.getElementById(id); if(el&&url){el.href=url;el.target='_blank';el.rel='noopener'}};
  setHref('buyBtn',DEDUST_LINK); setHref('buyPrimary',DEDUST_LINK);
  setHref('chartBtn',CHART_LINK); setHref('chartPrimary',CHART_LINK);
  setHref('tgBtn',TELEGRAM_LINK); setHref('tgPrimary',TELEGRAM_LINK);
  setHref('twBtn',TWITTER_LINK); setHref('twPrimary',TWITTER_LINK);

  // Copy contract address
  const copyBtn = document.getElementById('copyBtn');
  copyBtn.addEventListener('click', async ()=>{
    try{
      await navigator.clipboard.writeText(CONTRACT_ADDRESS);
      const prev = copyBtn.textContent;
      copyBtn.textContent = "Copied!";
      copyBtn.disabled = true;
      setTimeout(()=>{ copyBtn.textContent = prev; copyBtn.disabled = false; }, 1600);
    }catch(e){
      // Fallback: select and copy
      const range = document.createRange();
      range.selectNode(document.getElementById('contractAddr'));
      const sel = window.getSelection();
      sel.removeAllRanges(); sel.addRange(range);
      try{ document.execCommand('copy'); }catch(_){}
      sel.removeAllRanges();
    }
  });

  loadMetrics();               // initial fetch
  setInterval(loadMetrics, 60_000); // refresh every minute
});

/* ---------- Load Price & Market Cap ---------- */
function formatUSD(n){
  const x = Number(n);
  if(!isFinite(x)) return "N/A";
  if(x >= 1) return "$" + x.toLocaleString(undefined,{maximumFractionDigits:2});
  if(x >= 0.01) return "$" + x.toLocaleString(undefined,{maximumFractionDigits:4});
  return "$" + x.toExponential(2);
}
async function loadMetrics(){
  const priceEl = document.getElementById('priceVal');
  const mcWrap  = document.getElementById('mcBadge');
  const mcEl    = document.getElementById('mcVal');

  try {
    // Prefer token endpoint (often includes market_cap_usd / fdv_usd)
    const t = await fetch(GT_TOKEN_API, {headers:{'Accept':'application/json'}}).then(r=>r.json());
    const ta = t?.data?.attributes || {};
    let priceUsd = ta.price_usd ?? ta.base_token_price_usd;
    if(!priceUsd){
      // Fallback: read from pool if token endpoint doesn't have price
      const p = await fetch(GT_POOL_API, {headers:{'Accept':'application/json'}}).then(r=>r.json());
      priceUsd = p?.data?.attributes?.base_token_price_usd;
    }
    if(priceUsd){
      priceEl.textContent = formatUSD(priceUsd);
    } else {
      priceEl.textContent = "N/A";
    }

    // Market cap: prefer market_cap_usd, else show FDV if available
    const mc = ta.market_cap_usd ?? ta.fdv_usd ?? null;
    if(mc){
      mcEl.textContent = formatUSD(mc);
      mcWrap.style.display = "";
    } else {
      mcWrap.style.display = "none";
    }
  } catch (e){
    priceEl.textContent = "N/A";
    mcWrap.style.display = "none";
  }
}

/* ===================================
   Proofs Slideshow
   =================================== */
const PROOFS = [
  "https://i.ibb.co/67P7LB1F/image.jpg",
  "https://i.ibb.co/fd9HqwvW/image.jpg",
  "https://i.ibb.co/d0Sg6rMp/image.jpg"
];
const SLIDE_MS = 3500;
let proofIdx = 0, proofTimer = null;

function preload(urls){ urls.forEach(u=>{ const i=new Image(); i.src=u; }); }
function setProof(idx){
  proofIdx = (idx + PROOFS.length) % PROOFS.length;
  const img = document.getElementById('proofImg');
  const link = document.getElementById('proofLink');
  img.classList.remove('show');
  const nextUrl = PROOFS[proofIdx];
  const tmp = new Image();
  tmp.onload = ()=>{ img.src = nextUrl; img.classList.add('show'); };
  tmp.src = nextUrl + "?v=" + Date.now();
  link.href = nextUrl;
  document.querySelectorAll('.dot').forEach((d,i)=> d.classList.toggle('active', i===proofIdx));
}
function startProofs(){ if (proofTimer) clearInterval(proofTimer); setProof(0); proofTimer = setInterval(()=> setProof(proofIdx+1), SLIDE_MS); }
function buildDots(){
  const holder = document.getElementById('proofDots');
  holder.innerHTML = "";
  PROOFS.forEach((_, i)=>{
    const d = document.createElement('div');
    d.className = 'dot' + (i===0 ? ' active' : '');
    d.addEventListener('click', ()=>{
      setProof(i);
      if (proofTimer){ clearInterval(proofTimer); }
      proofTimer = setInterval(()=> setProof(proofIdx+1), SLIDE_MS);
    });
    holder.appendChild(d);
  });
}
function wireHoverPause(){
  const hero = document.getElementById('proofHero');
  hero.addEventListener('mouseenter', ()=>{ if(proofTimer){ clearInterval(proofTimer); proofTimer=null; }});
  hero.addEventListener('mouseleave', ()=>{ if(!proofTimer){ proofTimer=setInterval(()=> setProof(proofIdx+1), SLIDE_MS); }});
}

/* ===================================
   Sticker Wall (GitHub Pages friendly)
   =================================== */
const MAX_STICKERS = 30;
const PATHS_TO_TRY = ["./stickers/"]; // relative path only
function checkImage(url){
  return new Promise(res=>{
    const i=new Image();
    i.onload=()=>res(true);
    i.onerror=()=>res(false);
    i.src = url + (url.includes('?')?'&':'?') + "v=" + Date.now();
  });
}
async function resolveStickerUrl(file){
  for(const base of PATHS_TO_TRY){
    const url = base + file;
    if(await checkImage(url)) return url;
  }
  return null;
}
async function discoverStickers(){
  const found=[]; let misses=0;
  for(let i=1;i<=MAX_STICKERS;i++){
    const name=`animal${i}.png`;
    const url = await resolveStickerUrl(name);
    if(url){ found.push({url}); misses=0; }
    else   { misses++; if(misses>=3 && found.length) break; }
  }
  return found;
}
function buildWall(list){
  const wall=document.getElementById('stickerWall');
  wall.innerHTML="";
  if(!list.length){
    wall.innerHTML = "<p style='color:#ffb3b3'>Upload images to <code>/stickers/</code> named <code>animal1.png</code>, <code>animal2.png</code>, ‚Ä¶</p>";
    return;
  }
  list.forEach(it=>{
    const fig=document.createElement('figure');
    const a=document.createElement('a'); a.href=it.url; a.target="_blank"; a.rel="noopener";
    const img=document.createElement('img'); img.src=it.url; img.alt="Sticker";
    a.appendChild(img); fig.appendChild(a); wall.appendChild(fig);
  });
}

/* ===================================
   Falling Sticker Rain (canvas)
   =================================== */
const MOBILE_BREAKPOINT = 780;
const DESKTOP = { DENSITY_BASE:26000, SIZE_MIN:28, SIZE_MAX:80, SPEED_MIN:0.8, SPEED_MAX:2.2, OPACITY:0.95 };
const CONFETTI= { DENSITY_BASE:42000, SIZE_MIN:18, SIZE_MAX:46, SPEED_MIN:0.6, SPEED_MAX:1.6, OPACITY:0.9 };

const cvs=document.getElementById('rain');
const ctx=cvs.getContext('2d',{alpha:true});

function isMobile(){ return Math.max(innerWidth, innerHeight) < MOBILE_BREAKPOINT; }
let S=DESKTOP;

function fit(){
  const dpr=Math.max(1,Math.min(2,devicePixelRatio||1));
  cvs.width=Math.floor(innerWidth*dpr);cvs.height=Math.floor(innerHeight*dpr);
  cvs.style.width=innerWidth+'px';cvs.style.height=innerHeight+'px';
  ctx.setTransform(dpr,0,0,dpr,0,0);S=isMobile()?CONFETTI:DESKTOP;
}
addEventListener('resize',fit,{passive:true}); fit();

let icons=[],drops=[],rafId=0;
function targetCount(){return Math.max(16,Math.min(120,Math.floor((innerWidth*innerHeight)/S.DENSITY_BASE)));}
function spawn(){
  const img=icons.length?icons[(Math.random()*icons.length)|0]:null;
  const size=S.SIZE_MIN+Math.random()*(S.SIZE_MAX-S.SIZE_MIN);
  return{
    x:Math.random()*innerWidth,
    y:-80,
    vy:S.SPEED_MIN+Math.random()*(S.SPEED_MAX-S.SPEED_MIN),
    size,
    rot:Math.random()*Math.PI*2,
    vr:(Math.random()-.5)*0.02,
    sway:(Math.random()-.5)*.7,
    img
  };
}
function step(){
  ctx.clearRect(0,0,innerWidth,innerHeight);
  for(const d of drops){
    d.y+=d.vy;
    d.x+=Math.sin(d.y*.02)*d.sway;
    d.rot+=d.vr;
    if(d.img){
      ctx.save();
      ctx.translate(d.x,d.y);
      ctx.rotate(d.rot);
      ctx.globalAlpha=S.OPACITY;
      ctx.drawImage(d.img,-d.size/2,-d.size/2,d.size,d.size);
      ctx.restore();
    }
  }
  // prune off-screen
  for(let i=drops.length-1;i>=0;i--){
    if(drops[i].y>innerHeight+100) drops.splice(i,1);
  }
  // top up to target
  while(icons.length && drops.length<targetCount()){
    drops.push(spawn());
  }
  rafId=requestAnimationFrame(step);
}
if(!rafId) rafId=requestAnimationFrame(step);

function loadIcons(list){
  return Promise.all(list.map(it=>new Promise(r=>{
    const im=new Image();
    im.onload = ()=>r(im);
    im.onerror= ()=>r(null);
    im.src    = it.url;
  }))).then(arr=>arr.filter(Boolean));
}

/* ===================================
   Boot sequence
   =================================== */
document.addEventListener('DOMContentLoaded', async ()=>{
  // Proofs slideshow
  preload(PROOFS);
  buildDots();
  startProofs();
  wireHoverPause();

  // Sticker wall + rain icons
  const files=await discoverStickers();
  buildWall(files);

  if(files.length){
    const first=await loadIcons(files.slice(0,8));
    if(first.length) icons.push(...first);
    // seed a few to show immediately
    for(let i=0;i<12;i++) drops.push(spawn());
    if(files.length>8){
      const rest=await loadIcons(files.slice(8));
      if(rest.length) icons.push(...rest);
    }
  }
});
</script>
</body>
</html>
